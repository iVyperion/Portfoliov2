<!DOCTYPE html>
<html lang="nl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hackathon - Opbouw</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <link rel="stylesheet" href="css/prism.css">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="./js/main.js" type="module"></script>

</head>

<body>
  <div class="container">
    <header>
      <div class="content">
        <button aria-expanded="false" class="hamburger" id="menu">
          <span aria-hidden="true" class="icon">
            <span></span><span></span><span></span>
          </span>
          <span>Menu</span>
        </button>
        <nav>
          <ul>
            <li><a href="./index.html">Home</a></li>
            <li><a href="./tijdperken.html">Tijdperken</a></li>
            <li><a class="active" href="#">Opbouw</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <main>
      <h1>Opbouw</h1>
      <div class="content_table">
        <a href="#code">code</a>
        <p> - </p>
        <a href="#blockschema">blokschema</a>
        <p> - </p>
        <a href="#flowchart">Flowchart</a>
      </div>
      <section id="blokschema">
        <h2>Blokschema</h2>
        <img src="./img/blokschema.png" alt="Foto van de puzzel-doos opstelling">
        <p>Hier komt foto van de doos</p>
      </section>
      <section id="flowchart">
        <h2>Flowchart</h2>
        <div class="flowchart">
          <iframe src="./img/flowchart.pdf" allowfullscreen></iframe>
        </div>
      </section>
      <section id="code">
        <h2>Code</h2>
        <figure>
          <pre>
                      <code class="language-cpp">
                        //// Libraries
#include <Wire.h>
#include <Arduino.h>
#include <LiquidCrystal_I2C.h>
#include <IRremote.hpp>
#include <Adafruit_NeoPixel.h>

//// Pins
const int tempPin = A0;        // Temperatuur pin
const int potPin = A1;         // Potentiometer pin
const int ledPin = 4;          // LED pin
const int buzzerPin = 7;       // Buzzer pin
const int invoerIR = 2;        // IR Remote pin
const int ledRingPin = 9;      // LED ring pin
const int ledRingLeds = 16;    // LED ring LED's
const int ledStripPin = 6;     // LED strip pin
const int ledStripLeds = 100;  // LED strip LED's

//// Initializeren componenten
LiquidCrystal_I2C lcd(0x27, 20, 4);
IRrecv receiver(invoerIR);
Adafruit_NeoPixel ring = Adafruit_NeoPixel(ledRingLeds, ledRingPin, NEO_GRB + NEO_KHZ800);
Adafruit_NeoPixel strip = Adafruit_NeoPixel(ledStripLeds, ledStripPin, NEO_GRB + NEO_KHZ800);


int nummberDoos = 1;
int maxWaarde = 60;

//// Algemene variabelen
int randomSeedGen = 0;
String scan = "";    // Als iets word gescand komt het hier in
int difficulty = 0;  // 1 = easy, 2 = intermediate, 3 = hard
int tijdperk = 0;    // houdt bij in welk tijdperk men zich bevindt

//// Variabelen Oude Nabije Oosten
// Custom characters
byte char1[8] = {
  B01010,
  B01010,
  B01010,
  B01010,
  B01000,
  B01010,
  B01010,
  B01010
};
byte char2[8] = {
  B00001,
  B00010,
  B00100,
  B11000,
  B01000,
  B00100,
  B00010,
  B00001
};
byte char3[8] = {
  B01000,
  B11111,
  B01001,
  B00001,
  B01111,
  B00111,
  B00011,
  B00001
};
byte char4[8] = {
  B00010,
  B00010,
  B00010,
  B00010,
  B00010,
  B11111,
  B00010,
  B00010
};
byte char5[8] = {
  B00100,
  B00101,
  B00110,
  B11100,
  B10010,
  B10001,
  B10000,
  B11111
};
byte char6[8] = {
  B11111,
  B10001,
  B10001,
  B11111,
  B11111,
  B10001,
  B10001,
  B11111
};
byte char7[8] = {
  B00001,
  B01111,
  B00010,
  B00100,
  B00100,
  B01100,
  B10010,
  B00001
};
byte char8[8] = {
  B11101,
  B11110,
  B01111,
  B00111,
  B00011,
  B00001,
  B00000,
  B10000
};
byte char9[8] = {
  B01111,
  B10000,
  B01111,
  B00001,
  B00001,
  B00111,
  B01110,
  B11001
};

byte char10[8] = {
  B10001,
  B01010,
  B00100,
  B00100,
  B11111,
  B00100,
  B01110,
  B10001
};

byte char11[8] = {
  B11001,
  B10101,
  B10101,
  B10101,
  B10101,
  B10101,
  B10001,
  B11111
};

byte char12[8] = {
  B01110,
  B01010,
  B01010,
  B01010,
  B01010,
  B01010,
  B01110,
  B10001
};

byte char13[8] = {
  B00000,
  B00000,
  B11111,
  B00000,
  B11111,
  B00100,
  B01010,
  B10001
};

byte char14[8] = {
  B11111,
  B11111,
  B00100,
  B11111,
  B00100,
  B11111,
  B11111,
  B11111
};

byte char15[8] = {
  B00100,
  B00100,
  B10111,
  B01000,
  B00100,
  B11011,
  B01010,
  B01010
};
byte char16[8] = {
  B01000,
  B01000,
  B01000,
  B11111,
  B01111,
  B01001,
  B01001,
  B01001
};
//// Variabelen Middeleeuwen
// hulp variablen voor oplossen onderdelen
int progresieAntwoorden = 0;
int andwoordenlengte = 0;

// codes per tijdvak
String mid3Reeks1 = "7610700600054";
String mid3Reeks2 = "5400107529094";
String mid3Reeks3 = "5410329687731";

String mid2Reeks1 = "761070060005";
String mid2Reeks2 = "540010752904";
String mid2Reeks3 = "761070060057";

String mid1Reeks1 = "76107006054";
String mid1Reeks2 = "54001029094";
String mid1Reeks3 = "76100600057";

String scanDeo = "8718951076594";


String antMidGebruikteReeks;

// uitkomsten reeksen
String antMid3Reeks1[] = {
  "a",  // ricola
  "b",  // sencys
  "c",  // zakdoenkendoos
  "d"   // kit
};


String antMid3Reeks2[] = {
  "7610700600054",  // ricola
  "5400107529094",  // sencys
  "5400141625080",  // zakdoenkendoos
  "5410329687731"   // kit
};


String antMid3Reeks3[] = {
  "7610700600054",  // ricola
  "5400107529094",  // sencys
  "5400141625080",  // zakdoenkendoos
  "5410329687731"   // kit
};

//// Variabelen Eigen Tijd
int jaartal;
int correctJaarArray[4];  // Correcte jaar
int jaarArray[4];         // Ingegeven jaar

void setup() {
  pinMode(ledPin, OUTPUT);
  lcd.init();
  lcd.backlight();

  // Custom chars
  lcd.createChar(0, char1);
  lcd.createChar(1, char2);
  lcd.createChar(2, char3);
  lcd.createChar(3, char4);
  lcd.createChar(4, char5);
  lcd.createChar(5, char6);
  lcd.createChar(6, char7);
  lcd.createChar(7, char8);
  lcd.createChar(8, char9);
  lcd.createChar(9, char10);
  lcd.createChar(10, char11);
  lcd.createChar(11, char12);
  lcd.createChar(12, char13);
  lcd.createChar(13, char14);
  lcd.createChar(14, char15);
  lcd.createChar(15, char16);

  Serial.begin(9600);
  IrReceiver.begin(2, ENABLE_LED_FEEDBACK);
  receiver.enableIRIn();
  strip.begin();
  strip.show();
  ring.begin();
  ring.show();
}

char getLetterFromNumber(int number) {
  switch (number) {
    case 0:
      return 'a';
      break;
    case 1:
      return 'b';
      break;
    case 2:
      return 'd';
      break;
    case 3:
      return 'e';
      break;
    case 4:
      return 'g';
      break;
    case 5:
      return 'h';
      break;
    case 6:
      return 'i';
      break;
    case 7:
      return 'k';
      break;
    case 8:
      return 'l';
      break;
    case 9:
      return 'm';
      break;
    case 10:
      return 'n';
      break;
    case 11:
      return 'o';
      break;
    case 12:
      return 'p';
      break;
    case 13:
      return 'r';
      break;
    case 14:
      return 's';
      break;
    case 15:
      return 't';
      break;
    case 16:
      return 'u';
      break;
    case 17:
      return 'v';
      break;
    case 18:
      return 'w';
      break;
    case 19:
      return 'y';
      break;
    case 20:
      return 'z';
      break;
    default:
      return '\0';  // Return null character for numbers not mapped to a letter
  }
}

void loop() {
  // put your setup code here, to run once:
  int gem = 0;
  int max = 0;
  int min = 100;
  for (int i = 0; i < 200; i++) {
    int random = getRandomNumber(0, 100);
    gem += random;
    if (random > max) {
      max = random;
    }
    if (random < min) {
      min = random;
    }
  }
  Serial.println(gem / 200);
  Serial.println(max);
  Serial.println(min);
  delay(30000);
  digitalWrite(ledPin, LOW);
  // Wachten tot moeilijkheid wordt gescant
  while (difficulty == 0) {
    waitOnDifficulity();
  }
  if (tijdperk == 0) {  // Prehistorie
    Serial.println("Prehistorie");
    // beginPrehistorie();  // Start Prehistorie
    enableLedRing(tijdperk);
    delay(2000);
    tijdperk++;
  }
  if (tijdperk == 1) {  // Oude Nabije Oosten
    Serial.println("Oude Nabije Oosten");
    beginOudeNabijeOosten();  // Start Oude Nabije Oosten
    enableLedRing(tijdperk);
    delay(2000);
    tijdperk++;
  }
  if (tijdperk == 2) {  // Klassieke Oudheid
    Serial.println("Klassieke Oudheid");
    // beginKlassiekeOudheid();
    enableLedRing(tijdperk);
    delay(2000);
    tijdperk++;
  }
  if (tijdperk == 3) {  // Middeleeuwen
    Serial.println("Middeleeuwen");
    // middeleeuwenBegin();
    lcd.clear();
    Serial.println("einde middeleeuwen");
    enableLedRing(tijdperk);
    delay(2000);
    tijdperk++;
  }
  if (tijdperk == 4) {  // Nieuwste Tijd
    Serial.println("Nieuwste Tijd");
    beginNieuwsteTijd();
    tijdperk++;
  }
  if (tijdperk == 5) {  // Eigen Tijd
    Serial.println("Eigen Tijd");
    beginEigenTijd();
    Serial.println("einde tijd");
    tijdperk = 0;
  }
  //  enableLedstrip(1); // oproepen ledposietie op lange doos
  //  enableLedstrip(2);
  //  enableLedstrip(3);
  //  enableLedstrip(4);
  //  ledStripOpruimen();

  //  // Speel positief melodietje (beloning)
  //  playPositiveMelody();
  //  delay(2000); // Wacht 2 seconden
  //  playNegativeMelody();
  //  delay(2000); // Wacht 2 seconden
}


/* HELPER FUNCTIES */
void waitOnDifficulity() {  // Wachten tot Barcode woordt gescant van moeilijkheidshgraad
  lcd.clear();
  lcd.setCursor(2, 0);
  lcd.print("Kies moeilijkheid");  // (LCD) Kies moeilijkheid aan de hand van de barcode
  while (scan == "") {
    randomSeedGen = random(0, 100);
    scanner();
  }
  randomSeed(randomSeedGen);
  if (scan == "gemakkelijk") {
    difficulty = 1;
    Serial.println("Gemakkelijk");
    lcd.setCursor(4, 1);
    lcd.print("Gemakkelijk");
    delay(1500);
  } else if (scan == "gemideld") {
    difficulty = 2;
    Serial.println("Gemideld");
    lcd.setCursor(3, 1);
    lcd.print("Gemideld");
    delay(1500);
  } else if (scan == "moeilijk") {
    difficulty = 3;
    Serial.println("Moeilijk");
    lcd.setCursor(4, 1);
    lcd.print("Moeilijk");
    delay(1500);
  }
  lcd.setCursor(3, 2);
  lcd.print("Het spel");
  lcd.setCursor(2, 3);
  lcd.print("woordt gestart:");
  delay(2500);

  scan = "";
}

void scanner() {  // barcode scanner
  if (Serial.available()) {
    int scancount = 0;
    while (Serial.available()) {
      char input = Serial.read();
      scan = scan + input;
      scancount++;
      delay(5);
    }
    Serial.println();
  }
  scan.trim();  // bijwerken van de scanstring zonder uitvoer op de seriële monitor
}

void startVerhaaltje() {
  lcd.clear();
  lcd.setCursor(1, 0);
  lcd.print("Je bent gestrand");
  lcd.setCursor(1, 1);
  lcd.print("in de prehistorie");
  lcd.setCursor(1, 2);
  lcd.print("tijdens je tijdreis");
  delay(5500);
  lcd.clear();
  lcd.setCursor(4, 0);
  lcd.print("Repareer");
  lcd.setCursor(3, 1);
  lcd.print("de tijdmachine");
  delay(1500);
  lcd.setCursor(2, 2);
  lcd.print("en vind je weg");
  lcd.setCursor(3, 3);
  lcd.print("naar huis!");
  delay(5500);
}

int getRandomNumber(int min, int max) {  // Get a random number
  int output = random(min, max);
  return output;
}

String convertToBinary(int num) {  // Convert number to binary
  String binaryString = "";
  if (num == 0) {
    binaryString = "0";
  } else {
    while (num > 0) {
      int remainder = num % 2;
      binaryString = String(remainder) + binaryString;
      num /= 2;
    }
  }
  return binaryString;
}

void playBuzzerSound(int frequency) {  // Speelt buzzer af op bepaalde toon
  int buzzerPin = 7;
  tone(buzzerPin, frequency, 200);
  delay(200);
}

void playPositiveMelody() {
  // Frequenties van de noten voor het positieve melodietje
  int melody[] = { 262, 294, 330, 349, 392, 440, 494, 523 };
  int noteDuration = 120;  // Duur van elke noot (kortere duur)

  // Speel het positieve melodietje
  for (int note : melody) {
    tone(buzzerPin, note, noteDuration);
    delay(noteDuration);
    noTone(buzzerPin);
  }

  Serial.println("Positief melodietje afgespeeld");
}

void playNegativeMelody() {
  // Frequenties van de noten voor het negatieve melodietje
  int melody[] = { 523, 494, 440, 392, 349, 330, 294, 262 };
  int noteDuration = 120;  // Duur van elke noot (kortere duur)

  // Speel het negatieve melodietje
  for (int note : melody) {
    tone(buzzerPin, note, noteDuration);
    delay(noteDuration);
    noTone(buzzerPin);
  }

  Serial.println("Negatief melodietje afgespeeld");
}

/* PREHISTORIE */
float readTemperature() {  // Leest de temperatuur
  int sensorValue = analogRead(tempPin);
  float voltage = sensorValue * (5.0 / 1023.0);
  float temperatureC = (voltage - 0.5) * 100.0;
  return temperatureC;
}

void beginPrehistorie() {
  if (difficulty == 0) {
    return;
  }
  startVerhaaltje();
  float goal = 0;
  float currentTemp = 0;
  int countNeemWatTijd = 0;
  lcd.clear();
  lcd.setCursor(2, 0);
  lcd.print("Maak het vuur aan");  // Maak het vuur aan
  lcd.setCursor(4, 1);
  lcd.print("warm op,.....");
  lcd.setCursor(3, 2);
  lcd.print("en reis verder");
  switch (difficulty) {  // Wachten tot deelenemer blaast op de temp. sensor tot het bepaalde temperatuur bereikt.
    case 1:              // EASY MODE
      currentTemp = readTemperature();
      goal = 15.00;
      Serial.println(currentTemp);
      while (!(currentTemp >= goal - 1.00 && currentTemp <= goal + 1.00 && (countNeemWatTijd > 100))) {  // zorg ervoor dat de oplossing niet te snel gevonden kan woorden
        currentTemp = readTemperature();
        countNeemWatTijd++;
        Serial.println(currentTemp);
        delay(50);
        if (countNeemWatTijd == 2000) {
          break;
        }
      }
      break;
    case 2:  // INTERMEDIATE MODE
      currentTemp = readTemperature();
      goal = 20.00;
      while (!(currentTemp >= goal - 1.00 && currentTemp <= goal + 1.00 && (countNeemWatTijd > 100))) {
        currentTemp = readTemperature();
        countNeemWatTijd++;
        delay(50);
        if (countNeemWatTijd == 2000) {
          break;
        }
      }
      break;
    case 3:  // HARD MODE
      currentTemp = readTemperature();
      goal = 25.00;
      while (!(currentTemp >= goal - 1.00 && currentTemp <= goal + 1.00 && (countNeemWatTijd > 100))) {
        currentTemp = readTemperature();
        countNeemWatTijd++;
        delay(50);
        if (countNeemWatTijd == 2000) {
          break;
        }
      }
      break;
  }
  digitalWrite(ledPin, HIGH);
  lcd.clear();
  lcd.setCursor(2, 0);
  lcd.print("Het is je gelukt");
  lcd.setCursor(1, 1);
  lcd.print("warm je op stap in");
  lcd.setCursor(1, 2);
  lcd.print("en reis verder!");
  delay(5500);
}

/* BEGIN OUDE NABIJE OOSTEN */
void beginOudeNabijeOosten() {
  // Arrays voor de oplossingen
  int woordLengte;
  char* easyArray[] = { "dag", "bak", "bed", "die", "dek", "heb", "hek", "kid", "bad", "bik" };
  char* mediumArray[] = { "badge", "haged", "hiked", "hekje", "badee", "kegel", "biked", "kabed", "gehad", "adieu" };
  char* hardArray[] = { "aebgdikh", "kibhaedg", "dgeiakbh", "hkedbiga", "ibadegkh", "higeabdk", "ekdihbag", "aehikbdg", "dhgiekba", "bdgehiak" };

  int randomNumber;
  String woord;

  lcd.clear();
  lcd.setCursor(1, 0);
  lcd.print("Ontcijfer volgende");
  lcd.setCursor(0, 1);
  lcd.print("symbolen vanuit het");
  lcd.setCursor(8, 2);
  lcd.print("het");
  lcd.setCursor(1, 2);
  lcd.print("oude nabije oosten");
  delay(2500);
  lcd.clear();
  lcd.setCursor(1, 0);
  lcd.print("Ontcijfer volgende");
  lcd.setCursor(1, 1);
  lcd.print("tekst: ");
  enableLedstrip(1);
  delay(500);
  lcd.setCursor(2, 2);
  // Output a woord
  switch (difficulty) {
    case 1:  // BEGINNER
      randomNumber = getRandomNumber(0, 10);
      // Random nummer
      woord = easyArray[randomNumber];  // Pak random woord uit de lijst
      woordLengte = woord.length();
      for (int i = 0; i < woordLengte; i++) {
        lcd.setCursor(i + 2, 2);
        char letter = woord.charAt(i);
        Serial.println(letter);
        int charNum = getCharacterByteNumber(letter);
        Serial.println(charNum);
        lcd.write((uint8_t)charNum);
      }
      break;
    case 2:  // INTERMEDIATE
      randomNumber = getRandomNumber(0, 10);
      woord = mediumArray[randomNumber];
      woordLengte = woord.length();
      for (int i = 0; i < woordLengte; i++) {
        lcd.setCursor(i + 2, 2);
        char letter = woord.charAt(i);
        int charNum = getCharacterByteNumber(letter);
        lcd.write((uint8_t)charNum);
      }
      break;
    case 3:  // HARD
      randomNumber = getRandomNumber(0, 10);
      woord = hardArray[randomNumber];
      woordLengte = woord.length();
      for (int i = 0; i < woordLengte; i++) {
        lcd.setCursor(i + 2, 2);
        char letter = woord.charAt(i);
        int charNum = getCharacterByteNumber(letter);
        lcd.write((uint8_t)charNum);
      }
      break;
    default:
      return;
  }
  bool correct = false;
  while (correct == false) {
    correct = checkwoord(woord);
  }

  lcd.clear();
  lcd.setCursor(1, 0);
  lcd.print("De tijdmachine is");
  lcd.setCursor(0, 1);
  lcd.print("is terug up to date");
  lcd.setCursor(4, 2);
  lcd.print("we kunnen");
  lcd.setCursor(4, 3);
  lcd.print("weer verder!");
  delay(5500);
}

int getCharacterByteNumber(char letter) {
  switch (letter) {
    case 'a':
      return 0;
      break;
    case 'b':
      return 1;
      break;
    case 'd':
      return 2;
      break;
    case 'e':
      return 3;
      break;
    case 'g':
      return 4;
      break;
    case 'h':
      return 5;
      break;
    case 'i':
      return 6;
      break;
    case 'k':
      return 7;
      break;
    case 'l':
      return 8;
      break;
    case 'm':
      return 9;
      break;
    case 'n':
      return 10;
      break;
    case 'o':
      return 11;
      break;
    case 'p':
      return 12;
      break;
    case 'r':
      return 13;
      break;
    case 's':
      return 14;
      break;
    case 't':
      return 15;
      break;
  }
}

bool checkwoord(String woord) {  // Checkt of het woord word ingescand en het juist is.
  String letter;
  Serial.println(woord);
  int woordlengte = woord.length();
  Serial.println(woordlengte);
  for (int i = 0; i < woordlengte;) {  // Voor elk character in het woord kijkt hij naar de input van de scanner
    // letter = letterToBarcode(woord.charAt(i));
    letter = woord.charAt(i);
    Serial.println("letter : " + letter);
    while (scan == "") {
      scanner();
    }
    Serial.println(scan);
    if (scan == letter) {
      lcd.setCursor(2, 3);
      lcd.print("Letter: " + String(letter) + " is juist");
      playPositiveMelody();
      i++;
      Serial.println("input : " + scan);
    }
    if (scan != letter) {
      lcd.setCursor(6, 3);
      lcd.print("Letter: " + String(letter) + " is fout");
      playNegativeMelody();
      Serial.println("foute invoer ");
      Serial.println(scan);
    }
    scan = "";
  }
  return true;
}

/* BEGIN KLASSIEKE OUDHEID */
int* correctSequence = 0;
int myArraySize = 0;
void beginKlassiekeOudheid() {
  lcd.clear();
  lcd.setCursor(4, 0);
  lcd.print("Oeps ik ben");
  lcd.setCursor(3, 1);
  lcd.print("het wachtwoord");
  delay(500);
  lcd.setCursor(5, 2);
  lcd.print("vergeten!");
  lcd.setCursor(2, 3);
  lcd.print("Kraak de machine!");
  delay(2000);
  Serial.println(difficulty);
  switch (difficulty) {
    case 1:
      if (correctSequence != 0) {
        delete[] correctSequence;
      }
      correctSequence = new int[4];
      for (int i = 0; i < 4; i++) {
        int randomNumber = getRandomNumber(3, 12);
        while (i > 0 && randomNumber == correctSequence[i - 1]) {
          randomNumber = getRandomNumber(3, 12);
        }
        correctSequence[i] = randomNumber;

        Serial.print("Nummer " + String(i) + ": ");
        Serial.print(correctSequence[i]);
        Serial.println();
      }

      break;
    case 2:
      if (correctSequence != 0) {
        delete[] correctSequence;
      }
      correctSequence = new int[4];
      for (int i = 0; i < 4; i++) {
        int randomNumber = getRandomNumber(3, 12);
        while (i > 0 && randomNumber == correctSequence[i - 1]) {
          randomNumber = getRandomNumber(3, 12);
        }
        correctSequence[i] = randomNumber;
      }
      break;
    case 3:
      if (correctSequence != 0) {
        delete[] correctSequence;
      }
      correctSequence = new int[6];
      for (int i = 0; i < 6; i++) {
        int randomNumber = getRandomNumber(3, 12);
        while (i > 0 && randomNumber == correctSequence[i - 1]) {
          randomNumber = getRandomNumber(3, 12);
        }
        correctSequence[i] = randomNumber;
      }
      break;
    default:
      return;
  }
  lcd.setCursor(2, 3);
  lcd.print("                    ");
  lcd.setCursor(0, 3);
  lcd.print("Vooruitgang:");
  checkRightClockCombo();
  delete[] correctSequence;
  lcd.clear();
  lcd.setCursor(5, 0);
  lcd.print("Proficiat");
  lcd.setCursor(2, 1);
  lcd.print("het is je gelukt");
  delay(500);
  lcd.setCursor(3, 2);
  lcd.print("we kunnen weer");
  lcd.setCursor(3, 3);
  lcd.print("verder reizen!");
  delay(5500);
}
void checkRightClockCombo() {  // Kijken of er over de juiste cijfers wordt gegaan bij de klok
  int sensorValue, angle, position, numPositions = 11, currentIndex = 0;
  bool correct = false;
  while (correct == false) {
    sensorValue = analogRead(potPin);
    angle = map(sensorValue, 0, 1023, 0, 360);           // Zet sensor om naar graden
    position = map(angle, 0, 360, numPositions + 1, 1);  // Zet graden om naar cijfer van 0 tot 11
    Serial.println(position);
    if (position == correctSequence[currentIndex]) {  // Checkt of het cijfer juist is
      Serial.print("Current Index: ");
      Serial.println(currentIndex);
      Serial.print("Current Position: ");
      Serial.println(correctSequence[currentIndex]);
      lcd.setCursor((13 + currentIndex), 3);
      lcd.print("x");
      currentIndex++;
      switch (difficulty) {
        case 1:
          playBuzzerSound(1500);
          if (currentIndex == 4) {
            currentIndex = 0;
            correct = true;
          }
          delay(1000);  // Wait for the next number to be hovered above
          break;
        case 2:
          playBuzzerSound(1500);
          if (currentIndex == 4) {
            currentIndex = 0;
            correct = true;
          }
          delay(2000);  // Wait for the next number to be hovered above
          break;
        case 3:
          playBuzzerSound(1500);
          if (currentIndex == 6) {
            currentIndex = 0;
            correct = true;
          }
          delay(2500);  // Wait for the next number to be hovered above
          break;
      }
    } else {
      switch (difficulty) {
        case 1:  // Makkelijk, doet niks als het fout is
          if (currentIndex == 4) {
          }
          delay(1000);  // Wait before checking again
          break;
        case 2:  // Gemiddeld,
          if (currentIndex == 4) {
            currentIndex = 0;
          }
          delay(2000);  // Wait before checking again
          break;
        case 3:
          if (currentIndex == 6) {
            currentIndex = 0;
          }
          break;
          delay(2500);  // Wait before checking again
      }
    }
  }
}

bool checkHoverSequence(int currentPosition) {
  Serial.println("-------");
  static int currentIndex = 0;
  if (currentPosition == correctSequence[currentIndex]) {
    Serial.print("Current Index: ");
    Serial.print(currentIndex);
    Serial.println();
    Serial.print("Current postition: ");
    Serial.print(correctSequence[currentIndex]);
    Serial.println();
    currentIndex++;
    if (currentIndex == sizeof(correctSequence) / sizeof(correctSequence[0])) {
      playBuzzerSound(1500);
      Serial.print("Size correctSequence: ");
      Serial.print(sizeof(correctSequence));
      Serial.println();
      Serial.print("Size current correctSecuance: ");
      Serial.print(sizeof(correctSequence[0]));
      Serial.println();
      currentIndex = 0;
      return true;
    }
  } else {
    playBuzzerSound(500);
    currentIndex = 0;
    return false;
  }
}

/* MIDDELEEUWEN*/
void middeleeuwenBegin() {
  lcd.clear();          //voledige inhoud van scherm wissen
  lcd.setCursor(0, 0);  // plaats op scherm waar de text   (x,y) startende van 0
  lcd.print("Het geschiedenisboek");
  delay(500);
  lcd.setCursor(4, 1);
  lcd.print("van Alfons ");
  delay(500);
  lcd.setCursor(4, 2);
  lcd.print("is gevallen!");
  delay(5500);
  lcd.clear();
  lcd.setCursor(4, 0);
  lcd.print("Sorteer van");
  delay(450);
  lcd.setCursor(3, 1);
  lcd.print("oud naar nieuw");
  delay(350);
  lcd.setCursor(4, 2);
  lcd.print("en scan in!");

  switch (difficulty) {
    case 1:
      lcd.setCursor(1, 3);
      lcd.print("Neem 1 groen pakje");
      delay(500);
      break;
    case 2:
      lcd.setCursor(1, 3);
      lcd.print("Neem 1 blauw pakje");
      delay(500);
      break;
    case 3:
      lcd.setCursor(1, 3);
      lcd.print("Neem 1 rood pakje");
      delay(500);
      break;
  }
  enableLedstrip(1);
  delay(500);

  scan = "";
  boolean geslaagd = false;

  // kaartjes woorden door gebruiker genomen in volgorde gelegd en vervolgens ingescand
  andwoordenlengte = sizeof(antMid3Reeks1) / sizeof(antMid3Reeks1[0]);
  Serial.println(andwoordenlengte);
  Serial.println("------");
  geslaagd = middeleeuwenAntwoorden(antMid3Reeks1);

  progresieAntwoorden = 0;
  andwoordenlengte = 0;

  if (geslaagd == true) {
    lcd.clear();          //voledige inhoud van scherm wissen
    lcd.setCursor(0, 0);  // plaats op scherm waar de text   (x,y) startende van 0
    lcd.print("Het geschiedenisboek");
    delay(500);
    lcd.setCursor(4, 1);
    lcd.print("van Alfons ");
    delay(500);
    lcd.setCursor(3, 2);
    lcd.print("is geordend!");
    lcd.setCursor(0, 3);
    lcd.print("We gaan weer verder!");
    delay(4500);
    return;
  }
}

boolean middeleeuwenAntwoorden(String antMidGebruikteReeks[]) {
  Serial.println("begin controle antwoorden middeleeuwen");
  Serial.println(andwoordenlengte);
  Serial.println(progresieAntwoorden);

  for (int i = 0; i < andwoordenlengte; i++) {  //andwoorden uitprinten
    Serial.print(i);
    Serial.print(" : ");
    Serial.println(antMidGebruikteReeks[i]);
  }

  Serial.println("mid andwoorden gestart / verdergezet");

  while (scan == "") {
    scanner();
  }

  if (scan == antMidGebruikteReeks[progresieAntwoorden]) {
    scan = "";
    progresieAntwoorden++;
    Serial.println("Juist andwoord nummer : uit de reeks :");
    Serial.print(progresieAntwoorden);
    Serial.println();

    switch (difficulty) {
      case 1:
        lcd.clear();
        lcd.setCursor(0, 0);
        lcd.print("Sorteer,oud -> nieuw");
        lcd.setCursor(1, 1);
        lcd.print("Goed gedaan");
        lcd.setCursor(1, 2);
        lcd.print("ga zo verder");
        delay(100);
        break;
      case 2:
        lcd.clear();
        lcd.setCursor(0, 0);
        lcd.print("Sorteer,oud -> nieuw");
        lcd.setCursor(1, 1);
        lcd.print("Misschien goed");
        lcd.setCursor(1, 2);
        lcd.print("Misschien ook niet");
        delay(100);
        break;
      case 3:
        lcd.clear();
        lcd.setCursor(0, 0);
        lcd.print("Sorteer,oud -> nieuw");
        lcd.setCursor(1, 1);
        lcd.print("Misschien slecht");
        lcd.setCursor(1, 2);
        lcd.print("Misschien ook niet");
        delay(100);
        break;
    }

    if (andwoordenlengte == progresieAntwoorden) {
      lcd.clear();
      lcd.setCursor(1, 1);
      lcd.print("Goed gedaan");
      lcd.setCursor(1, 2);
      lcd.print("we vertrekken");
      delay(100);
      Serial.print("normaalgezien zou alles goed gegaan moeten zijn");
      return true;
    }

    if (andwoordenlengte != progresieAntwoorden) {
      Serial.println("fautieve invoer, we keren terug denk ik toch");
      Serial.println(andwoordenlengte);
      Serial.println(progresieAntwoorden);
      Serial.println("fautieve invoer, we keren terug denk ik toch");
      middeleeuwenAntwoorden(antMidGebruikteReeks);
    }

  } else {
    Serial.println("faut, repeat");
    scan = "";
    switch (difficulty) {
      case 1:
        lcd.clear();
        lcd.setCursor(1, 1);
        lcd.print("Niet goed");
        lcd.setCursor(1, 2);
        lcd.print("probeer opnieuw");
        delay(100);
        break;
      case 2:
        lcd.clear();
        lcd.setCursor(1, 1);
        lcd.print("Misschien slecht");
        lcd.setCursor(1, 2);
        lcd.print("Misschien ook niet");
        delay(100);
        break;
      case 3:
        lcd.clear();
        lcd.setCursor(1, 1);
        lcd.print("Misschien goed");
        lcd.setCursor(1, 2);
        lcd.print("Misschien ook niet");
        delay(100);
        break;
    }
    middeleeuwenAntwoorden(antMidGebruikteReeks);
  }
}

void beginEigenTijd() {
  int index = 0;
  bool correct = false;
  Serial.println("Start eigen tijd");
  jaartal = getRandomNumber(1500, 2500);
  lcdIntro();
  for (int i = 3; i >= 0; i--) {  // Steek random getal in array
    int divisor = 1;
    for (int j = 1; j <= i; j++) {
      divisor *= 10;
    }
    int num = (jaartal / divisor) % 10;
    Serial.println("Number " + String(3 - i) + " : " + String(num));
    correctJaarArray[3 - i] = num;
  }
  while (correct == false) {
    correct = compareArray();
  }
  delete[] jaarArray;
  lcd.clear();
  lcd.setCursor(5, 0);
  lcd.print("Proficiat!");
  lcd.setCursor(2, 1);
  lcd.print("Het is je gelukt!");
  lcd.setCursor(4, 2);
  lcd.print("Er wacht een");
  lcd.setCursor(3, 3);
  lcd.print("beloning op je!");
  enableLedstrip(4);
  delay(5500);
}
void lcdIntro() {
  lcd.clear();
  lcd.setCursor(2, 0);
  lcd.print("Wanneer ben ik ");
  lcd.setCursor(4, 1);
  lcd.print("gecreëerd?");
  lcd.setCursor(4, 2);
  lcd.print("in het jaar:");
  lcd.setCursor(4, 3);
  lcd.print(jaartal);
  delay(5500);
}
void translateIR(int num) {
  int code = receiver.decodedIRData.command;
  Serial.println(code);
  switch (code) {
    case 22:
      jaarArray[num] = 1;
      break;
    case 25:
      jaarArray[num] = 2;
      break;
    case 13:
      jaarArray[num] = 3;
      break;
    case 12:
      jaarArray[num] = 4;
      break;
    case 24:
      jaarArray[num] = 5;
      break;
    case 94:
      jaarArray[num] = 6;
      break;
    case 8:
      jaarArray[num] = 7;
      break;
    case 28:
      jaarArray[num] = 8;
      break;
    case 90:
      jaarArray[num] = 9;
      break;
    case 82:
      jaarArray[num] = 0;
      break;
    default:
      Serial.println("Input code was not found: " + String(code));
      break;
  }
}
bool compareArray() {
  int currentText = 0;                              // 0 = NEUTRAAL/GOED , 1 = HOGER/FOUT, 2 = LAGER
  bool fullyCorrect = false;                        // Als heel het jaarrtal correct is
  String binaryJaartal = convertToBinary(jaartal);  //convertToBinary(jaartal);
  switch (difficulty) {
    case 1:
      // Dif 1
      for (int i = 0; i < 4; i++) {
        Serial.println(i);
        bool curNumCorrect = false;
        while (curNumCorrect == false) {
          if (receiver.decode()) {
            translateIR(i);
            receiver.resume();
            Serial.println("Iteratie: " + String(i));
            Serial.println("Current input: " + String(jaarArray[i]));
            Serial.println("Correct input: " + String(correctJaarArray[i]));
          }
          if (jaarArray[i] > correctJaarArray[i]) {
            if (currentText != 2) {
              Serial.println("LAGER");
              lcd.clear();
              lcd.setCursor(5, 0);
              lcd.print(binaryJaartal);
              lcd.setCursor(7, 1);
              lcd.print("LAGER");
              currentText = 2;
            }
          } else if (jaarArray[i] < correctJaarArray[i]) {
            if (currentText != 1) {
              Serial.println("HOGER");
              lcd.clear();
              lcd.setCursor(5, 0);
              lcd.print(binaryJaartal);
              lcd.setCursor(7, 1);
              lcd.print("HOGER");
              currentText = 1;
            }
          } else {
            Serial.print("Cijfer ");
            Serial.print(jaarArray[i]);
            Serial.print(" correct");
            lcd.clear();
            lcd.setCursor(4, 0);
            lcd.print("CIJFER CORRECT");
            curNumCorrect = true;
            currentText = 0;
            if (i == 3) { fullyCorrect = true; }
          }
          delay(500);
        }
      }
      if (fullyCorrect) { return true; }
      break;
    case 2:
      for (int i = 0; i < 4; i++) {
        Serial.println(i);
        bool curNumCorrect = false;
        while (curNumCorrect == false) {
          if (receiver.decode()) {
            translateIR(i);
            receiver.resume();
            Serial.println("Iteratie: " + String(i));
            Serial.println("Current input: " + String(jaarArray[i]));
            Serial.println("Correct input: " + String(correctJaarArray[i]));
          }
          if (jaarArray[i] == correctJaarArray[i]) {
            if (currentText != 0) {
              lcd.clear();
              lcd.setCursor(5, 0);
              lcd.print(binaryJaartal);
              lcd.setCursor(7, 1);
              lcd.print("GOED");
              curNumCorrect = true;
              currentText = 0;
              if (i == 3) { fullyCorrect = true; }
              delay(1000);
            }


          } else {
            if (currentText != 1) {
              lcd.clear();
              lcd.setCursor(5, 0);
              lcd.print(binaryJaartal);
              lcd.setCursor(7, 1);
              lcd.print("FOUT");
              currentText = 2;
            }
          }
          delay(500);
        }
      }
      if (fullyCorrect) { return true; }
      break;
    case 3:
      for (int i = 0; i < 4; i++) {
        Serial.println(i);
        bool curNumCorrect = false;
        while (curNumCorrect == false) {
          if (receiver.decode()) {
            translateIR(i);
            receiver.resume();
            Serial.println("Iteratie: " + String(i));
            Serial.println("Current input: " + String(jaarArray[i]));
            Serial.println("Correct input: " + String(correctJaarArray[i]));
          }
          if (jaarArray[i] == correctJaarArray[i]) {
            if (currentText != 0) {
              lcd.clear();
              lcd.setCursor(5, 0);
              lcd.print(binaryJaartal);
              lcd.setCursor(7, 1);
              lcd.print("GOED");
              curNumCorrect = true;
              currentText = 0;
              if (i == 3) { fullyCorrect = true; }
              delay(1000);
            }


          } else {
            if (currentText != 1) {
              lcd.clear();
              lcd.setCursor(5, 0);
              lcd.print(binaryJaartal);
              lcd.setCursor(7, 1);
              lcd.print("FOUT");
              currentText = 2;
            }
          }
          delay(500);
        }
      }
      if (fullyCorrect) { return true; }
      break;
  }
}

void beginNieuwsteTijd() {
  bool correct = false;
  lcd.clear();          //voledige inhoud van scherm wissen
  lcd.setCursor(1, 0);  // plaats op scherm waar de text   (x,y) startende van 0
  lcd.print("Het verleden kijkt");
  delay(500);
  lcd.setCursor(8, 1);
  lcd.print("ons");
  delay(500);
  lcd.setCursor(0, 2);
  lcd.print("in vele kleuren toe");
  delay(500);
  lcd.setCursor(1, 3);
  lcd.print("Ontcijfer de code!");
  delay(5500);
  lcd.clear();
  lcd.setCursor(4, 0);
  lcd.print("Ontcijfer de");
  delay(450);
  lcd.setCursor(0, 1);
  lcd.print("kleurencode en scan!");
  lcd.setCursor(3, 2);
  lcd.print("Neem een pakje");
  lcd.setCursor(3, 3);
  lcd.print("uit het doosje");
  enableLedstrip(3);
  delay(5500);
  while (correct == false) {
    correct = scanCirkel();
  }
}
int ledCorrectSequenceAmount[4];  // Correcte opstelling van nummer + kleur
String ledCorrectSequenceColor[4];  // Correcte opstelling van nummer + kleur
bool scanCirkel() {
  Serial.println("Kijken voor input..");
  for (int i = 0; i < 4; i++) {
    Serial.println("Juist Aantal: " + String(ledCorrectSequenceAmount[i]));
    Serial.println("Juist kleur: " + ledCorrectSequenceColor[i]);
    // Scan nummer
    while (scan == "") {
      scanner();
    }
    Serial.println("Ingescand aantal: " + scan);
    if (scan != String(ledCorrectSequenceAmount[i])) {
      lcd.clear();
      lcd.setCursor(1, 3);
      lcd.print("Fout aantal");
      delay(500);
      lcd.setCursor(2, 3);
      lcd.print("begin opnieuw");
      delay(1000);
      scan = "";
      return false;
    } else {
      lcd.clear();
      lcd.setCursor(1, 3);
      lcd.print("Juist aantal");
      delay(500);
      lcd.setCursor(2, 3);
      lcd.print("Scan nu het kleur");
      delay(500);
      scan = "";
    }
    // Scan kleur
    while (scan == "") {
      scanner();
    }
    Serial.println("Ingescand kleur: " + scan);
    if (scan != ledCorrectSequenceColor[i]) {
      lcd.clear();
      lcd.setCursor(1, 3);
      lcd.print("Fout kleur");
      delay(500);
      lcd.setCursor(2, 3);
      lcd.print("begin opnieuw");
      delay(1000);
      scan = "";
      return false;
    } else {
      lcd.clear();
      lcd.setCursor(1, 3);
      lcd.print("Juist kleur");
      delay(500);
      scan = "";
    }
  }
  lcd.clear();          //voledige inhoud van scherm wissen
  lcd.setCursor(3, 0);  // plaats op scherm waar de text   (x,y) startende van 0
  lcd.print("Het is gelukt!");
  delay(500);
  lcd.setCursor(2, 1);
  lcd.print("we reizen verder");
  delay(500);
  lcd.setCursor(4, 2);
  lcd.print("Waar komen");
  delay(500);
  lcd.setCursor(3, 3);
  lcd.print("we nu terecht?");
  delay(5500);
  return true;
}

int total_index = 0;      // Welk nummer van led we zitten
int remaining_leds = 16;  // Overige leds
void enableLedRing(int tijdperk) {
  uint32_t red = ring.Color(255, 0, 0);      // red
  uint32_t cyan = ring.Color(0, 255, 255);   // cyan
  uint32_t groen = ring.Color(0, 255, 0);    // green
  uint32_t paars = ring.Color(128, 0, 128);  // paars
  uint32_t blue = ring.Color(0, 0, 255);     // blue
  uint32_t geel = ring.Color(255, 255, 0);   // yellow

  switch (difficulty) {  // tempsensor * potentionmeter *
    case 1:
      if (tijdperk == 0) {
        int redCount = getRandomNumber(2, 5);
        remaining_leds = (remaining_leds - redCount) - 1;
        int max = total_index + redCount;
        Serial.println("TIJDPERK 0");
        Serial.print("Remaining leds: ");
        Serial.print(remaining_leds);
        Serial.println();
        Serial.print("leds count: ");
        Serial.print(redCount);
        Serial.println();
        ledCorrectSequenceAmount[0] = redCount+1;
        ledCorrectSequenceColor[0] = "rood";
        for (int i = total_index; i <= max; i++) {
          Serial.print("Turn on led: ");
          Serial.print(i);
          Serial.println();
          ring.setPixelColor(i, red);
        }
        total_index = max + 1;
      }
      if (tijdperk == 1) {
        int cyanCount = getRandomNumber(2, 5);
        remaining_leds = (remaining_leds - cyanCount) - 1;
        int max = total_index + cyanCount;
        Serial.println("TIJDPERK 1");
        Serial.print("Remaining leds: ");
        Serial.print(remaining_leds);
        Serial.println();
        Serial.print("leds count: ");
        Serial.print(cyanCount);
        Serial.println();
        ledCorrectSequenceAmount[1] = cyanCount+1;
        ledCorrectSequenceColor[1] = "blauw";
        for (int i = total_index; i <= max; i++) {
          Serial.print("Turn on led: ");
          Serial.print(i);
          Serial.println();
          ring.setPixelColor(i, cyan);
        }
        total_index = max + 1;
      }
      if (tijdperk == 2) {
        int greenCount = getRandomNumber(2, 5);
        remaining_leds = (remaining_leds - greenCount) - 1;
        int max = total_index + greenCount;
        Serial.println("TIJDPERK 2");
        Serial.print("Remaining leds: ");
        Serial.print(remaining_leds);
        Serial.println();
        Serial.print("leds count: ");
        Serial.print(greenCount);
        Serial.println();
        ledCorrectSequenceAmount[2] = greenCount+1;
        ledCorrectSequenceColor[2] = "groen";
        for (int i = total_index; i <= max; i++) {
          Serial.print("Turn on led: ");
          Serial.print(i);
          Serial.println();
          ring.setPixelColor(i, groen);
        }
        total_index = max + 1;
      }
      if (tijdperk == 3) {
        int max = total_index + remaining_leds;
        Serial.println("TIJDPERK 3");
        Serial.print("Remaining leds: ");
        Serial.print(remaining_leds);
        Serial.println();
        Serial.print("leds count: ");
        Serial.print(total_index - remaining_leds);
        Serial.println();
        Serial.print("Total index: ");
        Serial.print(total_index);
        Serial.println();
        ledCorrectSequenceAmount[3] = remaining_leds+1;
        ledCorrectSequenceColor[3] = "paars";
        for (int i = total_index; i <= max; i++) {
          Serial.print("Turn on led: ");
          Serial.print(i);
          Serial.println();
          ring.setPixelColor(i, paars);
        }
      }
      ring.show();
      break;
    case 2:




      break;
    case 3:




      break;
  }
}
void enableLedstrip(int nummberDoos) {
  // Define the colors for each time period
  uint32_t red = strip.Color(255, 0, 0);      // red
  uint32_t cyan = strip.Color(0, 255, 255);   // cyan
  uint32_t groen = strip.Color(0, 255, 0);    // green
  uint32_t paars = strip.Color(128, 0, 128);  // paars
  uint32_t blue = strip.Color(0, 0, 255);     // blue
  uint32_t geel = strip.Color(255, 255, 0);   // yellow


  switch (nummberDoos) {
    case 1:
      maxWaarde = 42;
      break;
    case 2:
      maxWaarde = 47;
      break;
    case 3:
      maxWaarde = 52;
      break;
    case 4:
      maxWaarde = 60;
      break;
  }

  int f = 0;
  while (f != 4) {
    f++;

    for (int i = 0; i < maxWaarde; i++) {

      strip.setPixelColor(i, red);
      strip.show();
      delay(50);
      strip.setPixelColor(i - 1, 0);  // Turn off the remaining LEDs
      strip.show();
    }
    maxWaarde--;
  }
  switch (nummberDoos) {
    case 1:
      maxWaarde = 42;
      break;
    case 2:
      maxWaarde = 47;
      break;
    case 3:
      maxWaarde = 52;
      break;
    case 4:
      maxWaarde = 60;
      break;
  }
}
void ledStripOpruimen() {
  for (int i = 0; i < maxWaarde; i++) {
    strip.setPixelColor(i, 0);
    strip.show();
  }
}

                      </code>
                    </pre>
        </figure>
      </section>
    </main>
    <footer>
      <p>Copyright © Hackathon Team 6</p>
      <p>Project by: Victor Decaigny, Rohan Philips, Jens De Ruyck en Kwinten De Deyn</p>
    </footer>

  </div>
  <script src="./js/prism.js"></script>
</body>

</html>